title: 第一弹：了解btrfs
date: 2015-06-2 10:15:46
tags: 
- btrfs
- archlinux
- linux
categories: linux
---
文件系统，应该是在后台默默工作的存在，比如很多windows用户，用windows好多年，也不见得
知道自己使用的什么文件系统，就算linux用户，一般也就在安装时选择一下就OK了，一般也完全
没必要知道文件系统的存在。

但随着Sun公司的ZFS的发布，引发了文件系统的革命，主流操作系统或移植zfs，或开发自己的新
一代的文件系统，比如微软，在新一代的windows server中内置了ReFS文件系统，linux也在
Oracle以及社区的努力下开发了btrfs文件系统。

这些新型文件系统主要包含以下功能：
- COW机制：  
COW 即写时复制技术，通俗来讲就是比如某文件存在A这个地方，如果我们对这个文件进行了修改
如果没用COW技术，那就直接修改了A处的文件，如果一不小心删了不该删的一段，那基本上没有再
找回来的可能了，如果使用了COW技术呢，当我们改写文件时，会保持A处的内容不变，而把变化的
部分记录在B处。这样，就很容易实现比如“文件恢复”，“时光机”等功能。
- 卷管理
通常，我们管理硬盘空间，都是以硬盘、分区这种模式来管理的。比如我有2块硬盘，每个硬盘分了
四个分区，那我电脑上就一共8个分区，分类存储各种数据，但这样管理问题很多：比如我最大的分
区只有100G，我想存一个200G的电影该怎么办？通常的做法，就是调整分区表，做一个大于该电影
的分区，但调整分区费时费力，并且容易不慎丢失数据，为了更好的管理海量的空间，各系统都实
现了卷管理的方案，比如windows的动态磁盘、linux下的LVM，这两者都是在物理卷（硬盘，分区）
与逻辑卷（比如C D E F盘）之间加一个逻辑层，让系统来管理，逻辑卷之间

- 透明压缩

